---
    name: 'cicd.jenkins.incoming.failure'
    enabled: true
    description: 'Webhook listening for responses from Jenkins job failures'
    trigger:
        type: core.st2.webhook
        parameters:
            url: cicd/jenkins
    criteria:
      trigger.body.phase:
        pattern: "FINALIZED"
        type: equals
      trigger.body.build.status:
        pattern: "FAILURE"
        type: equals
    action:
      ref: slack.post_message
      parameters:
        message: "Build for {{trigger.body.name}}/{{trigger.body.scm.branch}} failed!. Details at {{trigger.body.build.full_url}}"
        channel: "#console"

