version: '2.0'

purr.process_stg1_tweet:
    description: Process tweet for stage 1 of the puzzle.
    input:
        - contestant
        - tweet_text
        - tweet_timestamp
    vars:
        tracker: <% $.contestant + '.stage.1' %>

    tasks:
        validate_tweet:
            action: core.noop
            on-success:
                - notify_contestant
        notify_contestant:
            action: core.noop
            on-success:
                - set_tracker
        set_tracker:
            action: st2.kv.set
            input:
                key: <% $.tracker %>
                value: <% $.tweet_timestamp %>
